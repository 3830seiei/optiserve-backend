# OptiServe AWS構築支援依頼 説明用資料

## 1. 本会議の目的

### ✅ 口頭での自然な言い回し（会議中でサラッと言える）

本日は、現在当社で構築を進めているSMDSプロジェクトと
その中のシステム、さらにはAWS稼働予定の OptiServe というAPI連携システムについて、
今後AWS上で構築・運用するにあたり、ご支援をお願いしたい範囲を共有し、
お見積とご相談をお願いしたいという目的でお時間をいただいています。

実はこのプロジェクト、私が参加する前にもPoC段階で別の大手さんにご協力いただいた経緯がありまして。
ただ、やはり形だけのモックで終わってしまった部分もあって、
そこから自分で少しずつ見直して今に至ります。
なので今回、Phase 1 を進めるにあたっても、本当にこのプロジェクトにプラスになる方と
しっかり組んでいきたいという気持ちが強いです。
その意味でも、今日は率直な相談をさせていただければと思っています。

### 🕒 2分目：「プロジェクト概要と位置づけ」

streamedixは、医療機関からのME情報などをもとに、医療機関にはレポートを、メーカーには分析結果を提供する仕組みです。
医療機関には無償でデータを提供していただき、代わりにレポートを提供。
一方でメーカーには分析結果を販売し、その一部を医療機関にポイント等で還元する仕組みを構想しています。

中でも OptiServe は、外部向けAPI連携の中核プラットフォームであり、医療機関・ディーラー・メーカーそれぞれが連携するための重要な基盤になります。

### ✅ 2. プロジェクトの概要 > streamedix 構成図閲覧時

streamedixという名前は開発コードのようなもので、SMDSという言葉が、チーム名やプロジェクト、システムも全て
兼ねているような状態だったので、私のほうで、医療データの活発な流れと未来を思わせる X を組み合わせて考えてものです。
チームのメンバーは知っていますが、そもそもほぼ１人で開発してきたので、あまり日の目にもあっていません

こちらが、現在当社で開発・構築を進めているstreamedixシステム全体の構成図です。
streamedixは、医療機関やメーカー向けにデータを収集・整備・提供する社内基幹プラットフォームで、複数のマイクロサービスが連携して動いています。
本日はこの中の「OptiServe」という、外部API連携の中核機能にフォーカスして、今後AWSに移行・本番運用するための支援をお願いしたいと考えています。
現時点ではローカル（Windows Server + WSL Ubuntu + Docker）でPoCまで進めており、今後これを安定稼働する商用基盤へとスムーズに移行したいと考えています。

### ✅ 3. OptiServe > フェーズ別の構築計画とリスク

Phase1ではPoC含め、比較的簡素な画面構成で、開発工数も限られています。

一方で、Phase2では医療機関→メーカー→医療機関へのポイント還元といったフローが発生するため、売掛・買掛処理や監査対応を意識した運用設計が必要になります。
この段階では、自社だけでは構築・保守に限界があると想定しており、信頼できるパートナーの存在が不可欠だと考えています。

### 🕒 3分目：「スケジュールと支援希望のタイミング」

現在のスケジュールとしては、8月末までに設計を完了、9月末までにPoCを完了予定です。
その後、10月から12月にかけてAWS上にデプロイして検証を行うフェーズに入ります。

今回のご相談では、この10月〜12月のフェーズに向けた構成提案と技術支援をお願いできないかと考えております。

特に、AWSの構成（EC2/ECS, RDS, IAMなど）選定、セキュリティ設計、構築支援のご提案をいただければ嬉しいです。

我々としても自社でできることは可能な限り自力で進めたいという方針ですが、社会に提供する以上、信頼できる外部パートナーとの連携が必要と判断し、今回ご相談に至りました。

### 5. アイレット様にお願いしたい内容 > 一通り説明した後の口頭補足

OptiServe自体は、運用が安定してくると月に数回程度の利用になる想定です。
なので、サーバーを常時立ち上げっぱなしの構成より、必要なときだけ起動して課金されるような形態の方が、コスト的にも適しているかと思っています。
その点で、**ECS Fargateのような構成の方が向いているのでは？**と感じているのですが、
実際の運用負荷やコストの比較も含めて、アドバイスいただけるとありがたいです。

先日もAWS Buildersセミナーを受講して、Amazon Q Developer を利用すれば、誰でもミスなく簡単にAWS上でデプロイまで持って行くことができる・・・
と言っていたけど、現実はそんなに甘く無いことも想像付きますし。

- ✅ ECS Fargate の要点整理

| 項目                 | 内容      |
| -------------------- | --------- |
|運用モデル            |サーバー（EC2）を一切意識せず、コンテナだけ定義すればOK|
|必要な定義            |- タスク定義（コンテナイメージ、リソース、環境変数など）- サービス定義（スケーリング・常時稼働かなど）|
|起動方法              |Docker HubやECR（AWSのレジストリ）にイメージをPushして、それをFargateに指定するだけ|
|従量課金              |CPU/メモリのリクエスト量 × 稼働時間で課金（秒単位で発生）|
|管理不要な部分        |- EC2インスタンス管理なし- OSパッチ不要- Dockerデーモン不要- オートスケールも組み込み可|
|相性の良いユースケース|- 小規模PoC- スケーリング重視のAPIサーバー- CI/CDと連携した短時間バッチ|

- ✅ Lambda との違い

|観点|ECS Fargate|AWS Lambda|
| -- | --------- | -------- |
|単位|コンテナ単位（自由）|関数単位（制限あり）|
|実行時間|制限なし（長時間可）|最大15分（制限あり）|
|実行環境|自由に定義（Python, Node, etc.）|ランタイム制限あり（独自ビルドは複雑）|
|利用感|Docker運用に慣れていれば使いやすい|軽量タスクには最適、重い処理は苦手|

## ✅ 想定Q&A（会議中に出そうな質問とその答え）

質問+想定される回答案

- Q. インフラ構成の希望はありますか？
  - 現時点ではDocker Composeベースで動かしており、ECS Fargate等の活用も視野に入れて検討したいと考えています。適切な構成をご提案いただければ嬉しいです。

- Q. セキュリティ要件で明確なポリシーはありますか？
  - 医療機関の情報ですが個人情報は含みません。ただし、将来的な拡張性や信頼性を意識して、IAM設計やアクセス制御はしっかり整備したいです。
  - 医療機関の方でも、この辺を気にする方はいらっしゃいますので、二段階認証は当然ながら、必要なら、特定のIPやドメインしかアクセス出来ないとかも考えたいと思っています。

- Q. Phase 1 の画面って実際どのようなものですか？
  1. ログイン
  2. ユーザーメンテナンス（管理者用、ユーザー向け自ドメイン限定用・・・同一画面で構築）
  3. MEシステムデータのアップロード
  4. 分析レポートのダウンロード
  5. 機器台帳のメンテナンス（集計候補とするか否かの選択）
  6. レポート出力対象の機器分類のメンテナンス
  7. 機器分類の医療機関とSMDSグループの紐付け
  [Phase1では無理に作らなくても良い]
  8. ディーラーへの権限譲渡範囲設定
  9. メーカーの閲覧医療機関選択
  10. 機器分類のメンテナンス

- Q. 既存システムとの連携や制約はありますか？
  - 今回構築するOptiServeは独立したAPI基盤として構築する想定で、現時点では外部との厳密な制約はありません。
  - AWS上のDBとオンプレミス側のDBは1日1回程度の同期を考えています。

- Q. 予算や契約の形態についての希望は？
  - 予算は小規模からのスタートを想定しており、まずはスモールスタート前提でご相談させていただければと思っています。
  - Phase2以降に拡張がある場合は別途相談させてください。
